(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cab0dbea"],{"0f20":function(e,t,r){},"33a6":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=this,r=t.$createElement,s=t._self._c||r;return s("div",[s("base-layout",[s("el-form",{ref:"shopRef",attrs:{model:t.shopForm,rules:t.shopRule,"label-width":"100px"}},[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"店铺名称",prop:"name"}},[s("el-input",{model:{value:t.shopForm.name,callback:function(e){t.$set(t.shopForm,"name",e)},expression:"shopForm.name"}})],1)],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"联系电话",prop:"telphone"}},[s("el-input",{model:{value:t.shopForm.telphone,callback:function(e){t.$set(t.shopForm,"telphone",t._n(e))},expression:"shopForm.telphone"}})],1)],1)],1),s("el-row",[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:"详细地址",prop:"address"}},[s("el-input",{model:{value:t.shopForm.address,callback:function(e){t.$set(t.shopForm,"address",e)},expression:"shopForm.address"}})],1)],1)],1),s("el-row",[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:"店铺简介"}},[s("el-input",{attrs:{type:"textarea"},model:{value:t.shopForm.description,callback:function(e){t.$set(t.shopForm,"description",e)},expression:"shopForm.description"}})],1)],1)],1),s("el-row",[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:"店铺标语"}},[s("el-input",{attrs:{type:"textarea"},model:{value:t.shopForm.slogan,callback:function(e){t.$set(t.shopForm,"slogan",e)},expression:"shopForm.slogan"}})],1)],1)],1),s("el-row",[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:"营业时间"}},[s("el-time-select",{attrs:{placeholder:"起始时间","picker-options":{start:"00:00",step:"00:30",end:"24:00"}},model:{value:t.shopForm.open_time,callback:function(e){t.$set(t.shopForm,"open_time",e)},expression:"shopForm.open_time"}}),s("el-time-select",{attrs:{placeholder:"结束时间","picker-options":{start:"00:00",step:"00:30",end:"24:00",minTime:t.shopForm.open_time}},model:{value:t.shopForm.close_time,callback:function(e){t.$set(t.shopForm,"close_time",e)},expression:"shopForm.close_time"}})],1)],1)],1),s("el-row",[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"店铺分类"}},[s("el-cascader",{attrs:{options:t.categoryList,props:{expandTrigger:"hover",value:"_id",label:"name"}},model:{value:t.shopForm.category,callback:function(e){t.$set(t.shopForm,"category",e)},expression:"shopForm.category"}})],1)],1),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"配送费"}},[s("el-input-number",{attrs:{min:0,step:.5},model:{value:t.shopForm.delivery_fee,callback:function(e){t.$set(t.shopForm,"delivery_fee",e)},expression:"shopForm.delivery_fee"}})],1)],1),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"起送价"}},[s("el-input-number",{attrs:{min:0},model:{value:t.shopForm.starting_price,callback:function(e){t.$set(t.shopForm,"starting_price",e)},expression:"shopForm.starting_price"}})],1)],1)],1),s("el-row",[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:"店铺特点"}},[s("el-switch",{attrs:{"active-text":"品牌保证"},model:{value:t.shopForm.feature.is_brand,callback:function(e){t.$set(t.shopForm.feature,"is_brand",e)},expression:"shopForm.feature.is_brand"}}),s("el-switch",{attrs:{"active-text":"蜂鸟专送"},model:{value:t.shopForm.feature.is_delivery,callback:function(e){t.$set(t.shopForm.feature,"is_delivery",e)},expression:"shopForm.feature.is_delivery"}}),s("el-switch",{attrs:{"active-text":"新开店铺"},model:{value:t.shopForm.feature.is_new,callback:function(e){t.$set(t.shopForm.feature,"is_new",e)},expression:"shopForm.feature.is_new"}}),s("el-switch",{attrs:{"active-text":"外卖保"},model:{value:t.shopForm.feature.is_ensure,callback:function(e){t.$set(t.shopForm.feature,"is_ensure",e)},expression:"shopForm.feature.is_ensure"}}),s("el-switch",{attrs:{"active-text":"准时达"},model:{value:t.shopForm.feature.is_ontime,callback:function(e){t.$set(t.shopForm.feature,"is_ontime",e)},expression:"shopForm.feature.is_ontime"}}),s("el-switch",{attrs:{"active-text":"开发票"},model:{value:t.shopForm.feature.is_bill,callback:function(e){t.$set(t.shopForm.feature,"is_bill",e)},expression:"shopForm.feature.is_bill"}})],1)],1)],1),s("el-row",[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"上传店铺头像"}},[s("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,action:t.uploadURL,headers:t.headers,"on-success":function(t){e.shopForm.shop_img=t.url}}},[t.shopForm.shop_img?s("img",{staticClass:"avatar",attrs:{src:t.shopForm.shop_img}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1),t.id?s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确定修改")]),s("el-button",{on:{click:function(e){return t.$router.push("/shopList")}}},[t._v("取消修改")])],1):s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("立即创建")])],1)],1)],1)],1)},o=[],a=(r("96cf"),r("1da1")),i=r("5530"),n=r("c1fb"),l=r("5880"),c={props:{id:{type:String}},data:function(){var e=function(e,t,r){var s=/^1[3456789]\d{9}$/;if(s.test(t))return r();r(new Error("请输入正确的手机号"))};return{shopForm:{name:"",telphone:"",address:"",description:"",slogan:"",open_time:"",close_time:"",category:null,delivery_fee:0,starting_price:0,feature:{is_brand:!1,is_delivery:!1,is_new:!1,is_ensure:!1,is_ontime:!1,is_bill:!1},shop_img:""},categoryList:[],shopRule:{name:[{required:!0,message:"请填写商家名称",trigger:"blur"}],telphone:[{required:!0,message:"请填写联系电话",trigger:"blur"},{validator:e,trigger:"blur"}],address:[{required:!0,message:"请填写详细地址",trigger:"blur"}]}}},computed:Object(i["a"])({},Object(l["mapState"])({uploadURL:function(e){return e.uploadURL},headers:function(e){return e.headers}})),created:function(){this.getCategoryList(),this.id&&this.getShopDetail()},methods:{getCategoryList:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(n["g"])();case 2:r=t.sent,s=r.data,e.categoryList=s.data;case 5:case"end":return t.stop()}}),t)})))()},getShopDetail:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(n["k"])(e.id);case 2:r=t.sent,s=r.data,e.shopForm=s.data,e.shopForm.category=[s.data.category.parent._id,s.data.category._id];case 6:case"end":return t.stop()}}),t)})))()},submit:function(){var e=this;this.$refs.shopRef.validate(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(r){var s,o,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return",!1);case 2:if(e.shopForm.category&&(e.shopForm.category=e.shopForm.category[1]),!e.id){t.next=11;break}return t.next=6,Object(n["v"])(e.id,e.shopForm);case 6:s=t.sent,o=s.data,e.$message.success(o.meta.message),t.next=16;break;case 11:return t.next=13,Object(n["r"])(e.shopForm);case 13:a=t.sent,i=a.data,e.$message.success(i.meta.message);case 16:e.$router.push("/shopList");case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},p=c,m=(r("9644"),r("2877")),u=Object(m["a"])(p,s,o,!1,null,"4a27104d",null);t["default"]=u.exports},9644:function(e,t,r){"use strict";var s=r("0f20"),o=r.n(s);o.a}}]);
//# sourceMappingURL=chunk-cab0dbea.cfa52eeb.js.map