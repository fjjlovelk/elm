(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74761646"],{"81c1":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=this,a=t.$createElement,r=t._self._c||a;return r("div",[r("base-layout",[r("el-button",{attrs:{type:"primary"},on:{click:function(e){t.cateDialog=!0}}},[t._v("添加一级分类")]),r("el-button",{attrs:{type:"primary"},on:{click:function(e){t.subCateDialog=!0}}},[t._v("添加二级分类")]),r("el-table",{attrs:{data:t.categoryList,"row-key":"_id","tree-props":{children:"children"},border:"","highlight-current-row":"","max-height":"840px"}},[r("el-table-column",{attrs:{label:"分类名称",prop:"name"}}),r("el-table-column",{attrs:{label:"分类级别"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.level?r("el-tag",[t._v("一级")]):r("el-tag",{attrs:{type:"warning"}},[t._v("二级")])]}}])}),r("el-table-column",{attrs:{label:"操作",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return t.editCategory(e.row)}}},[t._v("编辑")]),r("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(a){return t.delCategory(e.row)}}},[t._v("删除")])]}}])})],1)],1),r("el-dialog",{attrs:{title:t.cateId?"修改一级分类":"添加一级分类",visible:t.cateDialog},on:{close:t.closeCateDialog,closed:t.dialogClosed}},[r("el-form",{ref:"cateRef",attrs:{model:t.cateForm,"label-width":"100px",rules:t.cateRule}},[r("el-form-item",{attrs:{label:"图标",prop:"icon"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,action:t.uploadURL,headers:t.headers,"on-success":function(t){e.cateForm.icon=t.url}}},[t.cateForm.icon?r("img",{staticClass:"avatar",attrs:{src:t.cateForm.icon}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),r("el-form-item",{attrs:{label:"分类名称",prop:"name"}},[r("el-input",{model:{value:t.cateForm.name,callback:function(e){t.$set(t.cateForm,"name","string"===typeof e?e.trim():e)},expression:"cateForm.name"}})],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:t.saveCate}},[t._v("确定")]),r("el-button",{on:{click:function(e){t.cateDialog=!1}}},[t._v("取消")])],1)],1),r("el-dialog",{attrs:{title:t.cateId?"修改二级分类":"添加二级分类",visible:t.subCateDialog},on:{close:t.closeSubCateDialog,closed:t.dialogClosed}},[r("el-form",{ref:"subCateRef",attrs:{model:t.subCateForm,"label-width":"100px",rules:t.subCateRule}},[r("el-form-item",{attrs:{label:"父级分类",prop:"parent"}},[r("el-select",{model:{value:t.subCateForm.parent,callback:function(e){t.$set(t.subCateForm,"parent",e)},expression:"subCateForm.parent"}},t._l(t.categoryList,(function(e){return r("el-option",{key:e._id,attrs:{value:e._id,label:e.name}})})),1)],1),r("el-form-item",{attrs:{label:"分类名称",prop:"name"}},[r("el-input",{model:{value:t.subCateForm.name,callback:function(e){t.$set(t.subCateForm,"name","string"===typeof e?e.trim():e)},expression:"subCateForm.name"}})],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:t.saveSubCate}},[t._v("确定")]),r("el-button",{on:{click:function(e){t.subCateDialog=!1}}},[t._v("取消")])],1)],1)],1)},n=[],s=(a("b0c0"),a("96cf"),a("1da1")),o=a("5530"),i=a("c1fb"),c=a("5880"),l={data:function(){return{cateDialog:!1,subCateDialog:!1,categoryList:[],cateForm:{icon:"",name:""},cateRule:{icon:[{required:!0}],name:[{required:!0,message:"请输入分类名称",trigger:"blur"}]},subCateForm:{name:"",parent:null},subCateRule:{name:[{required:!0,message:"请输入分类名称",trigger:"blur"}],parent:[{required:!0,message:"请选择父级分类",trigger:"change"}]},cateId:null}},computed:Object(o["a"])({},Object(c["mapState"])({uploadURL:function(e){return e.uploadURL},headers:function(e){return e.headers}})),created:function(){this.getCategoryList()},methods:{closeCateDialog:function(){this.cateDialog=!1,this.$refs.cateRef.resetFields(),Object.assign(this.cateForm,this.$options.data().cateForm)},closeSubCateDialog:function(){this.subCateDialog=!1,this.$refs.subCateRef.resetFields(),Object.assign(this.subCateForm,this.$options.data().subCateForm)},dialogClosed:function(){this.cateId=null},getCategoryList:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["g"])();case 2:a=t.sent,r=a.data,e.categoryList=r.data;case 5:case"end":return t.stop()}}),t)})))()},saveCate:function(){var e=this;this.$refs.cateRef.validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(a){var r,n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return",!1);case 2:if(!e.cateId){t.next=10;break}return t.next=5,Object(i["t"])(e.cateId,e.cateForm);case 5:r=t.sent,n=r.data,e.$message.success(n.meta.message),t.next=15;break;case 10:return t.next=12,Object(i["o"])(e.cateForm);case 12:s=t.sent,o=s.data,e.$message.success(o.meta.message);case 15:e.getCategoryList(),e.cateDialog=!1;case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},saveSubCate:function(){var e=this;this.$refs.subCateRef.validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(a){var r,n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return",!1);case 2:if(!e.cateId){t.next=10;break}return t.next=5,Object(i["w"])(e.cateId,e.subCateForm);case 5:r=t.sent,n=r.data,e.$message.success(n.meta.message),t.next=15;break;case 10:return t.next=12,Object(i["s"])(e.subCateForm);case 12:s=t.sent,o=s.data,e.$message.success(o.meta.message);case 15:e.getCategoryList(),e.subCateDialog=!1;case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},editCategory:function(e){this.cateId=e._id,1===e.level?(Object.assign(this.cateForm,e),this.cateDialog=!0):(Object.assign(this.subCateForm,e),this.subCateDialog=!0)},delCategory:function(e){var t=this;this.$confirm("确定删除分类 ".concat(e.name," 吗"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(1!==e.level){a.next=7;break}return a.next=3,Object(i["a"])(e._id);case 3:r=a.sent,r.data,a.next=11;break;case 7:return a.next=9,Object(i["e"])(e._id);case 9:n=a.sent,n.data;case 11:t.$message.success(res.meta.message),t.getCategoryList();case 13:case"end":return a.stop()}}),a)})))).catch((function(){}))}}},u=l,m=(a("ee23"),a("2877")),b=Object(m["a"])(u,r,n,!1,null,"4fd62a04",null);t["default"]=b.exports},b0c0:function(e,t,a){var r=a("83ab"),n=a("9bf2").f,s=Function.prototype,o=s.toString,i=/^\s*function ([^ (]*)/,c="name";r&&!(c in s)&&n(s,c,{configurable:!0,get:function(){try{return o.call(this).match(i)[1]}catch(e){return""}}})},ee23:function(e,t,a){"use strict";var r=a("f8ac"),n=a.n(r);n.a},f8ac:function(e,t,a){}}]);
//# sourceMappingURL=chunk-74761646.923531bc.js.map